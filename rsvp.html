<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RSVP & Merchandise</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #fff7ee;
    margin: 0;
}
.container {
    max-width: 800px;
    margin: 40px auto;
    background: #fff;
    padding: 25px;
    border-radius: 10px;
}
label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
}
input, select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
}
.hidden {
    display: none;
}
.section-title {
    color: #d9715f;
    margin-top: 25px;
}
.total {
    margin-top: 15px;
    font-weight: bold;
    color: #d9715f;
}
button {
    margin-top: 25px;
    width: 100%;
    padding: 15px;
    font-size: 1.2rem;
    background: #d9715f;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
button:hover {
    background: #c45f52;
}
.guest {
    border: 1px solid #ddd;
    padding: 15px;
    margin-top: 10px;
    border-radius: 6px;
}
.fee-line {
    margin-top: 10px;
    font-weight: bold;
    color: #d9715f;
}
</style>
</head>

<body>

<div class="container">

<h2 class="section-title" style="text-align:center;">RSVP & Merchandise</h2>

<form id="rsvpForm" action="https://formspree.io/f/mvzpavbr" method="POST">

<label>First Name</label>
<input type="text" name="first_name" required>

<label>Last Name</label>
<input type="text" name="last_name" required>

<label>Will You Attend?</label>
<select id="attendance" name="attendance" required>
    <option value="" disabled selected>Select...</option>
    <option value="Yes">Yes</option>
    <option value="No">No</option>
</select>

<label>Email Address</label>
<input type="email" name="_replyto" required>

<!-- RSVP SECTION -->
<div id="yesFields" class="hidden">

<p class="fee-line">
    Registration Fee: <span style="color:#000;">$150 per person</span>
</p>

<h3 class="section-title">RSVP</h3>

<label>Your T-Shirt Size</label>
<select name="main_shirt_size">
    <option disabled selected>Select size...</option>
    <option>S</option><option>M</option><option>L</option>
    <option>XL</option><option>2XL</option><option>3XL</option>
</select>

<label>Number of Guests</label>
<input type="number" id="guestCount" min="0" value="0">

<div id="guestFields"></div>

<div class="total">
    RSVP Total: <span id="rsvpTotal">$0</span>
</div>

</div>

<hr>

<!-- MERCH -->
<h3 class="section-title">Merchandise (Optional)</h3>

<label>Merch T-Shirt Size</label>
<select name="merch_tshirt_size">
    <option disabled selected>Select size...</option>
    <option>S</option><option>M</option><option>L</option>
    <option>XL</option><option>2XL</option><option>3XL</option>
</select>

<label>Merch T-Shirt Quantity ($25)</label>
<input type="number" id="shirtQty" min="0" value="0">

<label>Hoodie Size</label>
<select name="merch_hoodie_size">
    <option disabled selected>Select size...</option>
    <option>S</option><option>M</option><option>L</option>
    <option>XL</option><option>2XL</option><option>3XL</option>
</select>

<label>Hoodie Quantity ($40)</label>
<input type="number" id="hoodieQty" min="0" value="0">

<label>Cap Quantity ($15)</label>
<input type="number" id="capQty" min="0" value="0">

<div class="total">
    Merchandise Total: <span id="merchTotal">$0</span><br>
    Grand Total: <span id="grandTotal">$0</span>
</div>

<input type="hidden" name="rsvp_total" id="rsvpHidden">
<input type="hidden" name="merch_total" id="merchHidden">
<input type="hidden" name="grand_total" id="grandHidden">
<input type="hidden" name="_next" value="thankyou.html">

<button type="submit" id="submitBtn">Submit – Total $0</button>

</form>
</div>

<script>
const attendance = document.getElementById("attendance");
const yesFields = document.getElementById("yesFields");
const guestCount = document.getElementById("guestCount");
const guestFields = document.getElementById("guestFields");

const shirtQty = document.getElementById("shirtQty");
const hoodieQty = document.getElementById("hoodieQty");
const capQty = document.getElementById("capQty");

const rsvpTotalEl = document.getElementById("rsvpTotal");
const merchTotalEl = document.getElementById("merchTotal");
const grandTotalEl = document.getElementById("grandTotal");
const submitBtn = document.getElementById("submitBtn");

const REG_FEE = 150;

attendance.addEventListener("change", () => {
    yesFields.classList.toggle("hidden", attendance.value !== "Yes");
    guestCount.value = 0;
    guestFields.innerHTML = "";
    updateTotals();
});

guestCount.addEventListener("input", () => {
    guestFields.innerHTML = "";
    const count = Number(guestCount.value);

    for (let i = 1; i <= count; i++) {
        const div = document.createElement("div");
        div.className = "guest";
        div.innerHTML = `
            <label>Guest ${i} First Name</label>
            <input type="text" name="guest_${i}_first" required>
            <label>Guest ${i} T-Shirt Size</label>
            <select name="guest_${i}_shirt" required>
                <option disabled selected>Select size...</option>
                <option>S</option><option>M</option><option>L</option>
                <option>XL</option><option>2XL</option><option>3XL</option>
            </select>
        `;
        guestFields.appendChild(div);
    }
    updateTotals();
});

function updateTotals() {
    const attending = attendance.value === "Yes" ? 1 : 0;
    const guests = Number(guestCount.value) || 0;
    const people = attending + guests;

    const rsvpTotal = people * REG_FEE;
    const merchTotal =
        (shirtQty.value * 25) +
        (hoodieQty.value * 40) +
        (capQty.value * 15);

    const grandTotal = rsvpTotal + merchTotal;

    rsvpTotalEl.textContent = `$${rsvpTotal}`;
    merchTotalEl.textContent = `$${merchTotal}`;
    grandTotalEl.textContent = `$${grandTotal}`;
    submitBtn.textContent = `Submit – Total $${grandTotal}`;

    document.getElementById("rsvpHidden").value = `$${rsvpTotal}`;
    document.getElementById("merchHidden").value = `$${merchTotal}`;
    document.getElementById("grandHidden").value = `$${grandTotal}`;
}

[shirtQty, hoodieQty, capQty].forEach(el =>
    el.addEventListener("input", updateTotals)
);
</script>

</body>
</html>
